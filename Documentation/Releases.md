# Creating a new HOHQMesh release

This document describes the necessary steps for creating a new HOHQMesh release.
When following these guidelines, don't forget to replace `1.2.3` with the
current release version of HOHQMesh, and `1.3.0` with the new release you are
about to create.

*Note: All steps as described here are assumed to be performed in a
clean clone of the `master` branch. Also make sure that nobody accidentally
pushes to `master` while you are preparing or creating the new release*

## Pre-release preparations
1. Note the version number of the current HOHQMesh release by checking the
   [latest release](https://github.com/trixi-framework/HOHQMesh/releases/latest)
   on GitHub. The version number will be something like `1.2.3`, with the
   corresponding Git tag `v1.2.3`.
2. Determine which kind of version increment is necessary based on the changes
   since the last release. We use [semantic versioning](https://semver.org),
   which [states](https://semver.org/spec/v2.0.0.html#summary)
   > Given a version number MAJOR.MINOR.PATCH, increment the:
   >
   > MAJOR version when you make incompatible API changes,  
   > MINOR version when you add functionality in a backwards compatible manner, and  
   > PATCH version when you make backwards compatible bug fixes.

   To see all the changes since the last release, you can use GitHub's `compare`
   functionality by navigating to the following address, adjusting the version
   tag appropriately:  
   https://github.com/trixi-framework/HOHQMesh/compare/v1.2.3...master

   Let's say that the changes require a *minor* version increment, thus the new
   release version following `1.2.3` would be `1.3.0`.

## Release creation
1. Increment the version number in [Source/HOHQMeshMain.f90](../Source/HOHQMeshMain.f90).
   If this guide has been followed before, the current version in
   the file should be something like `1.2.4-pre`, indicating that the
   `master` branch is in a pre-release state (as is the case during development).
   Change the pre-release version to the new version number you determined
   above, e.g., to `1.3.0`.
2. Commit and push to `master`.
3. Navigate to https://github.com/trixi-framework/HOHQMesh/releases/new to start
   creating a new release.
4. Enter `v1.3.0` as the `Tag version`, which will create a Git tag of this
   name.
5. Use `HOHQMesh v1.3.0` as the `Release title`.
6. Feel free to add more information about this release in the description field
   (optional).
7. Click `Publish release`.


## Post-release actions
1. Create a new release tarball by executing
   ```bash
   ./Utilities/createrelease 1.3.0
   ```
   where `1.3.0` again refers to the new release you have just created. If
   there are no errors, this will result in a new file `HOHQMesh-v1.3.0.tar.gz`
   in the current directory.
2. Attach the file you just created to the new release by navigating to the 
   [latest release](https://github.com/trixi-framework/HOHQMesh/releases/latest)
   and clicking `Edit release`. You can then drag and drop the tarball in the
   gray area below the release description. Click `Update release`.
3. Increment the version number in
   [Source/HOHQMeshMain.f90](../Source/HOHQMeshMain.f90) to a pre-release
   version to indicate that the content of the `master` branch does not
   necessarily reflect the files of an existing, tagged release. The pre-release
   version is generated by incrementing the patch version and appending `-pre`.
   For example, if you just created the release `1.3.0`, the next pre-release
   version would be `1.3.1-pre`.
4. Commit and push to `master`.
